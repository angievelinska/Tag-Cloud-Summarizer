<div xmlns="http://www.coremedia.com/2003/richtext-1.0" xmlns:xlink="http://www.w3.org/1999/xlink"><p class="MsoNormal"><span xml:lang="EN-US">The Query API provides a generic, programmatic way to find objects stored within the SSE repository. Rather than concatenating string fragments into some query language like SQL or EJB-QL, which is a cumbersome and error-prone process, you build your queries by creating objects representing certain aspects of a query, combine them </span>programmatically<span xml:lang="EN-US">, and finally pass them to a query instance for execution. </span></p><p><span xml:lang="EN-US">Following the general structure of the SSE API, the query API is </span>divided<span xml:lang="EN-US"> into two layers. The core layer, to be found in the package </span><span class="inlineformat--code" xml:lang="EN-US">com.coremedia.sse.core.queries</span><span xml:lang="EN-US">,  provides a raw, low-level access to resources and relationship objects as they are stored in the database. A core level query is created directly from the </span><span class="inlineformat--code" xml:lang="EN-US">Repository</span><span xml:lang="EN-US"> using </span><span class="inlineformat--code" xml:lang="EN-US">Repository.createQuery(ElementType type)</span><span xml:lang="EN-US">. The provided element type defines the domain of the query, the initial set of resources or elements the query operates upon. If this result set is not restricted further (see below), the query will return all elements of the given type which exist within the repository (with the exception of deleted resources, we will come back to this later).</span></p><p><span xml:lang="EN-US">At this point, you are forced to decide whether you want to search for resources or relationships. One query for resources and relationships is not possible. This means that you may not pass the top level </span><span class="inlineformat--code" xml:lang="EN-US">Element</span><span xml:lang="EN-US"> type here, you have to pass some subtype when creating a repository query. For the current implementation you can choose between </span><span class="inlineformat--code" xml:lang="EN-US">Resource</span><span xml:lang="EN-US"> and </span><span class="inlineformat--code" xml:lang="EN-US">Relationship.</span></p><p><span xml:lang="EN-US">Building upon these core services, a higher level, more domain specific layer is defined in the package </span><span class="inlineformat--code" xml:lang="EN-US">com.coremedia.sse.base.queries.</span><span xml:lang="EN-US"> It provides a higher-level access to these resources. This layer generally operates on Java beans which is a natural fit with the CAE programming model. Application programmers will generally prefer to stay on this level. You create a domain level query with the base module by </span><span xml:lang="EN-GB">calling </span><span class="inlineformat--code" xml:lang="EN-GB">BaseModule.createQuery(</span><span class="inlineformat--code" xml:lang="EN-US">ElementType type</span><span class="inlineformat--code" xml:lang="EN-GB">)</span><span xml:lang="EN-US">. The same restriction to the type parameter applies here: you have to decide whether you want to search for resources or relationships.</span></p><p class="align--none MsoNormal"><span xml:lang="EN-US">Once you have created a query instance, you may restrict the result set of a query by adding search criteria with </span><span class="inlineformat--code" xml:lang="EN-US">Query.where()</span><span xml:lang="EN-US">, add orderings via </span><span class="inlineformat--code" xml:lang="EN-US">Query.orderBy()</span><span xml:lang="EN-US">, apply a Projection by calling </span><span class="inlineformat--code" xml:lang="EN-US">Query.setProjection</span><span class="inlineformat--code" xml:lang="EN-GB">()</span><span xml:lang="EN-GB">, and limit the size of the result list by calling </span><span class="inlineformat--code" xml:lang="EN-US">Query.setLimit()</span><span xml:lang="EN-US">. For result paging, you may also set the index of the first item to be returned by calling </span><span class="inlineformat--code" xml:lang="EN-US">Query.setStart()</span><span xml:lang="EN-US">. Finally, the query is executed and the resulting elements are retrieved by calling </span><span class="inlineformat--code" xml:lang="EN-US">Query.list()</span><span xml:lang="EN-US">.</span> </p><p/></div>