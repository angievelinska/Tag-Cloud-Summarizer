<div xmlns="http://www.coremedia.com/2003/richtext-1.0" xmlns:xlink="http://www.w3.org/1999/xlink"><p class="p--heading-1">Using Projections</p><p>A <span class="inlineformat--code">Projection</span> represents a mapping of the items within a query result list to some values derived from these items. Examples of possible mappings include the selection of some component property of the items, and aggregate computations such as counting the total number of items, summing up the property values or calculating their average value.  </p><p><span class="inlineformat--code">Projection</span> instances are, like <span class="inlineformat--code">Criterion</span> objects, created by using a domain specific criteria factory where you have to specify the exact kind of mapping which should be applied. As an example, the following projection simply counts the size of the result set, which is the number of content objects submitted by a given user. This projection saves the overhead of fetching all content objects from the database in order to determine this number:</p><p class="p--codeblock">List&lt;Number&gt; counts = (List&lt;Number&gt;) <br/>   baseModule.createQuery(baseModule.getUserContentType())<br/>            .where(userContentCriteria.ownerIs(user1))<br/>            .setProjection(userContentCriteria.count())<br/>            .list();<br/>int count = counts.get(0).intValue();</p><p>A more interesting (and complex) kind of projections are histogram projections which return a list of key value pairs. These contain a computed value for some group of items within the result set. This is similar to the functionality provided by <span class="inlineformat--code">GROUP BY</span> and aggregate expressions in <span class="inlineformat--code">SQL</span>. As an example, the following query computes a tag cloud for the 30 most frequently used tags within the repository: </p><p class="p--codeblock">TaggingCriteria taggingCriteria = baseModule.getTaggingCriteria();<br/>List&lt;KeyValuePair&lt;String, Number&gt;&gt; tagCounts = <br/>  baseModule.createQuery(baseModule.getTaggingType())<br/>    .setProjection(taggingCriteria.countTags(true))<br/>    .setLimit(100)<br/>    .list();<br/></p><p>Note that, when setting the <span class="inlineformat--code">countTags()</span> projection, the result list is implicitly ordered by the number of tag occurrences (the value part of the key value pair), most frequent tags first.</p></div>