<div xmlns="http://www.coremedia.com/2003/richtext-1.0" xmlns:xlink="http://www.w3.org/1999/xlink"><p>After the analysis process has run at least once, you can retrieve ¿ for each user ¿ similar users and recommended items.</p><p class="p--heading-1">Retrieving recommendations</p><p>The recommendation service gives you recommendations for a given user based on ratings. The average rating is generated by averaging all ratings for this item uniformly. The expected rating is based on the ratings of users similar to the current user, but it is normalized to take into account the user¿s rating habits, i.e., whether the user normally tends to rate items high or low. Please note that the expected rating may leave a given rating scale in some instances, e.g., when a user who rates very high on average is recommended an often highly rated item. You are encouraged to clip the value as needed. An <span class="inlineformat--code">Item</span> that the user rated himself at the time of the last run of the recommendation  process are not returned by the recommendation service.</p><p>If you want to retrieve recommendations from the recommendation service, you can use the method <span class="inlineformat--code">getRecommendations</span> from the interface <span class="inlineformat--code">RecommendationService</span> as follows:</p><p>First, you have to obtain access to the <span class="inlineformat--code">RecommendationService</span> instance. To do so, use Spring to inject the bean <span class="inlineformat--code">recommendationService</span> into your objects. Assuming that you start from a <span class="inlineformat--code">User</span> object in variable <span class="inlineformat--code">user</span>, proceed as follows:</p><p class="p--codeblock">Collection&lt;Recommendation&gt; recommendations =<br/>recommendationService.getRecommendations(user.getResource(), 10);<br/><br/>if (!recommendations.isEmpty()) {<br/>  for (Recommendation recommendation : recommendations) {<br/>    MyItem item = (MyItem) baseModule.getElementBeanFactory().<br/>                     createBeanFor(recommendation.getResource());<br/><br/>    double expectedRating = recommendation.getExpectedRating();<br/>    double averageRating = recommendation.getAverageRating();<br/><br/>    // process recommendation<br/><br/>  }<br/>}</p><p>The type <span class="inlineformat--code">MyItem</span> given above must be replaced by the target type of the association that you are using. </p><p class="p--heading-1">Retrieving similar users</p><p>The recommendation service gives you also users who have rated similarly to a given user. Use the method <span class="inlineformat--code">getNeighbors</span> from the <span class="inlineformat--code">RecommendationService</span>.</p><p>You pass the resource identifying the user to the service and you retrieve a collection of <span class="inlineformat--code">Neighbor</span> objects, that provide access to the resource of the neighboring user and to a number between -1 and 1 that indicates distance (negative numbers) or closeness (positive numbers) to that user.</p><p>A user is never a neighbor of himself.</p><p class="p--heading-1">Retrieving similar items</p><p>It is possible to retrieve items that were rated similarly compared with a given item. User the method <span class="inlineformat--code">getSimilarItems</span> from the <span class="inlineformat--code">RecommendationService</span>.</p><p>In this case, the argument resource must identify the item and the returned collection contains <span class="inlineformat--code">SimilarItem</span> objects.</p><p>An item is never similar to itself.</p></div>