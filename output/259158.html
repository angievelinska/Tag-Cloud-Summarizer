<div xmlns="http://www.coremedia.com/2003/richtext-1.0" xmlns:xlink="http://www.w3.org/1999/xlink"><p class="p--heading-1">Example: How to generate an Atom 1.0 feed</p><p>There are several ways to put the feed generation API in an application. Depending on the application's needs and design, different approaches can be preferable. In the following example it is assumed that a CAE-style Spring controller (e.g. one extending <span class="inlineformat--code">AbstractViewController</span>) returns a bean of type <span class="inlineformat--code">com.example.LatestContent</span> as the model bean ("self"). <span class="inlineformat--code">LatestContent</span> has a property <span class="inlineformat--code">items</span>, which returns a list of objects. Feed generation in this example is implemented as a programmatic, named view of the <span class="inlineformat--code">LatestContent</span> bean (other views may exist, such as a JSP view <span class="inlineformat--code">com/example/LatestContent.jsp</span>).</p><p class="p--codeblock">package com.example.views.FeedView;<br/><br/>import com.coremedia.objectserver.web.ServletView;<br/>import com.coremedia.feeds.*;<br/>import com.example.LatestContent;<br/>import javax.servlet.http.HttpServletRequest;<br/>import javax.servlet.http.HttpServletResponse;<br/>import java.util.List;<br/><br/>public class FeedView implements ServletView {<br/>  // these are considered constant and <br/>  // will be injected by the Spring bean factory<br/>  <br/>  private FeedGenerator generator;<br/>  private FeedFormat feedType;<br/>  private String title;<br/>  private String uri;<br/>  private String link;<br/><br/>  // getters and setters not shown<br/>  // ...<br/><br/>  public void render(Object self, String viewName, <br/>                     HttpServletRequest request, <br/>                     HttpServletResponse response) {<br/><br/>    // get the list of objects to return as feed entries<br/>    LatestContent latestContent = (LatestContent) self;<br/>    List&lt;?&gt; contentList = latestContent.getItems();<br/><br/>    try {<br/>      // create the output writer <br/>      // feedType is assumed constant here, <br/>      // but may be derived from the view name as well<br/>      FeedWriter feedWriter = <br/>        generator.createFeedWriter(feedType, response.getWriter());<br/><br/>      // initialize the feed meta data. only title, uri, <br/>      // and link are required.<br/>      FeedMetaData metaData = new FeedMetaDataImpl();<br/>      metaData.setTitle(title);<br/>      metaData.setUri(uri);<br/>      metaData.setLink(link);<br/><br/>      response.setHeader("content-type", "text/xml");<br/><br/>      // create a feed context with the request and response<br/>      FeedContext context = generator.createFeedContext();<br/>      context.setAttribute(<br/>        FeedContext.REQUEST_ATTRIBUTE_NAME, request);<br/>      context.setAttribute(<br/>        FeedContext.RESPONSE_ATTRIBUTE_NAME, response);<br/><br/>      // generate the feed from the item list and write the output<br/>      // to the response writer<br/>      generator.generateFeed(metaData, contentList,  feedWriter,<br/>                             context);<br/><br/>    } catch (Exception e) {<br/>      // no user-friendly error handling in this example<br/>      throw new RuntimeException("Failed to generate data feed", e);<br/>    }<br/>  }<br/><br/>}</p><p>This programmatic view is registered with the view dispatcher as the view with name "atom" for beans of type <span class="inlineformat--code">LatestContent</span> in <span class="inlineformat--code font-name--courier">custom/views.xml</span>:</p><p class="p--codeblock">  &lt;bean id="programmedViews" <br/>    class="org.springframework.beans.factory.config.MapFactoryBean"&gt;<br/>    &lt;property name="sourceMap"&gt;<br/>      &lt;map&gt;<br/>        &lt;!-- other programmatic views are here... --&gt;<br/>        &lt;entry key="com.example.LatestContent#rss" <br/>               value-ref="atomFeedView"/&gt;<br/>      &lt;/map&gt;<br/>    &lt;/property&gt;<br/>  &lt;/bean&gt;<br/><br/>  &lt;bean id="atomFeedView" parent="abstractFeedView"<br/>        class="com.example.views.FeedView"&gt;<br/>    &lt;property name="feedGenerator" ref="feedGenerator"/&gt;<br/>    &lt;!-- constant from com.coremedia.feeds.FeedFormat --&gt;<br/>    &lt;property name="feedType" value="Atom_1_0"/&gt;<br/><br/>    &lt;property name="title" value="Recent posts"/&gt;<br/>    &lt;!-- well known URL for this example --&gt;<br/>    &lt;property name="link" <br/>              value="http://localhost:8080/servlet/latest/"/&gt;<br/>    &lt;!-- reuse the link as the URI --&gt;<br/>    &lt;property name="uri" <br/>              value="http://localhost:8080/servlet/latest/"/&gt; <br/>  &lt;/bean&gt;</p><p>To generate the feed, request the URL of the controller with a view parameter of "atom". Without custom feed item data providers, the view will work for lists of <span class="inlineformat--code">UserContent</span> objects.</p></div>