

For the Oracle database you need the Oracle JDBC Thin Driver oracle.jdbc.driver.OracleDriver. Copy the driver file to the <CoreMediaHome>/lib directory. There also exists the Oracle OCI driver which could be used. However, this driver can cause some problems:

If the database crashes, the OCI driver hangs/blocks and the CoreMedia Server must be restarted. 
3* Connections can hang during rollback. 
Problems with the streaming of BLOBS can occur.
Sun recommends the thin driver for performance reasons.

Furthermore, the driver needs an additional Oracle client installation on the CM Server host. Therefore the OCI driver is not recommended.

Important: Always use the latest version of the JDBC driver for your database version and the JDK being used. New driver versions can be obtained from the Oracle website http://technet.oracle.com.

In order to optimize queries, Oracle needs to gather statistics. For supported Oracle 9i databases, you need to execute the DBMS_STATS.GATHER_SCHEMA_STATS command of your Oracle database for each CoreMedia database user:

It may be useful to configure a cronjob that optimizes the database on a regular basis. The interval depends on the updates of content.

Since version 10i, the Oracle DBMS gathers this information automatically, but manual creation of the statistics would do no harm.


In sql.properties, the following settings must be made for an Oracle database:

sql.store.driver=oracle.jdbc.driver.OracleDriver
sql.store.url=jdbc:oracle:thin:@<DB-HOST>:
                            <DB-PORT>:<DB-INSTANCE>
sql.store.dbProperties=corem/oracle
sql.store.user=<DB-USER>
sql.store.password=<DB-USER-PASSWORD>

The name of the database user may be given in lowercase in the sql.properties, but it must be stored as all uppercase in the database.

The Oracle database instance must be configured with a sufficient number of DB Cursors. The number is set in the Oracle initialization script init<Instancename>.ora in the entry open_cursors (for further details see the documentation of the database manufacturer).

The number of cursors for a CoreMedia Server is calculated with the following formula:

<Number of Cursors> = <Maximum number of database connections> * (95 + (<Number of document types> *8))

where <Maximum number of database connections> is defined with the property

sql.pool.maxConnections=<Maximum number of database connections>

The standard value is 4 connections. For a server with 15 document types and 4 parallel database connections therefore, 860 cursors are needed. The total number necessary for the Oracle instance is calculated from the sum of the cursors required by all applications.



Sample SQL: Create DB User and Drop DB User