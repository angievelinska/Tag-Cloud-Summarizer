

After defining the state and data model, queries and query result consolidator, finally the report view, i.e. its visualization, must be configured. The view is mainly configured in a section of the report definition. Additionally localization of variable values, report sentence must be defined. Optionally, chart customizer classes can be programmed which control the appearance of the report chart.

Report Localization

To configure localized report title, sentence and explanation, do the following: 

1. Specify tile, sentence and explanation message keys in the view configuration. Below you find a configuration example for the pre-defined Top Viewed Pages  report. 

<property name="view">
  <bean class="com.coremedia.analytics.dashboard.mvc.view.
   ReportViewConfiguration">

    <!-- Report Title, descriptive sentence, explanation -->
    <property name="titleKey" value="ReportDefinition.
      TopViewedPages.title"/>
    <property name="sentenceTemplateKey" value="ReportDefinition.
      TopViewedPages.sentenceTemplate"/>
    <property name="explanationKey" value="ReportDefinition.
      TopViewedPages.explanation"/>
    ...
  </bean>
</property>

Next provide localized textual messages in the custom Dashboard property file(s). The custom Dashboard property file is located at /WEB-INF/classes/com/coremedia/analytics/custom/Dashboard_<two-letter-localedcode>.properties. Below find an example for the report's English localizations.


ReportDefinition.TopViewedPages.title=Top Viewed Pages
...
ReportDefinition.TopViewedPages.sentenceTemplate=Display \
  [top {entries} viewed pages] of site {site} of {range}.
...
ReportDefinition.TopViewedPages.explanation=<h3>Explanation</h3>\
  <p>This chart displays the top # ...</p>



The report sentence text contains placeholders for the state model¿s variables, additionally square brackets can be used to mark a text as bold. Furthermore, you may add markup tags to format the message. 

Example: The state model variable `timeRange¿ can be included in the sentence with the placeholder {timeRange}. Marking it [{timeRange}] will turn it bold. You do not have to specify how to map the variable to its user-interface representation; the report renderer will automatically create a variable representation suitable for the selected render format.

Selection of the Report View Template; Report and Chart customization

Additional to the report texts, the view configuration specifies a report view template to render the report chart, and optionally a report customizer to pass report instance variables to the report template as well as a chart customizer class that allow programmatic beautification of the report chart:



A report view template is a standard JasperReport http://jasperforge.org/sf/projects/jasperreports XML-based report template which contains a few CoreMedia Analytics-specific placeholders (named CMReport_...). Please consult the JasperReport documentation on how to create templates. Please note that report charts are usually placed in the template¿s page footer section and NOT in the detail section. It is recommended style to place charts there as this avoids a generation of large amounts of undesired report pages with partial chart data.



A report customizer passes report instance values, such as the user name and the generation time as parameters to the report template. If no report customizer is provided, a default report customizer is used, which passes the following data to the report template:

