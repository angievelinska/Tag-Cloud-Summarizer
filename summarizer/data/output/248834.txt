

By default, the ViewDispatcher determines the template implementing a resource view solely based on the type of a resource. However, the desired layout might depend on other criteria such as the current value of a property, the position of the resource, value of a URI parameter, etc. These rules normally have to be implemented by code within the template. This leads to considerable mixing of layout (usually HTML code) and logic, so that the templates can hardly be edited with HTML tools. In such cases it is desirable to actually use a number of different templates for the different cases, here termed variants.


The ViewDispatcher enables you to dispatch to different templates not only based on the resource type but on other properties of the ResourceUri, especially the targeted resource. You can configure the ViewDispatcher with a set of variant rules that determine which variant of a view should be used. In this way, you can shift case decisions from the templates to globally configurable rules.


From a ResourceUri (i.e. a resource with template-ID and possibly further parameters), a variant rule determines a list of symbolic variant designators. If no variants apply, an empty list can be returned. As many variant rules as desired can be configured. They are executed one after another and their result lists are concatenated.


The overall result is a variant list attached to the view. This list is used to look up an appropriate view. If no view is found matching the complete variant list, the list is shortened successively from the right until it is empty. If a view cannot be found even with a shorter variant list, the normal inheritance mechanism is used, i.e. the same lookup will take place on the supertype, again starting with the complete variant list. The rationale behind this lookup order is that variants play a subordinate role compared to dispatch according to document type, so that in every case the most specific implementation of the view is used. See Example 4.4.1.3a for the lookup order for the requested view renderNormal with the variant list [homepage,colored], referring to the document types of the example in the next section. 
