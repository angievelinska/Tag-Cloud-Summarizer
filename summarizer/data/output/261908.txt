

If you need to run your custom SQL queries, the following steps can be taken. NOTE: If the functionality provided by the AnalyticsReportDataProvider helper classes is sufficient, these steps are not needed. It is recommended to try SQL statements with a database tool like SQLSquirrel.

Explanation

Any Analytics Database report query is determined by its parameters. In order to report e.g. on the ¿Top N Viewed Pages on Site S in Category C during Time Interval T¿, following Analytics parameters must be set:

¿The base table name: It determines which Analytics Database table is used to lookup the core data
¿The time interval to be used: The time interval to be used determines a) table name suffix and b) the time interval upper bound and lower bound. First, according to the Analytics Database schema, different tables (determined by their suffix) hold data for different time interval granularities. Second, the Analytics Database requires that timestamps must be given in UTC and full hours. Additionally, the database table 'PERMANENTLYAGGREGATEDBEFORE' must be queried in order to know until which point in time report data has been acquired.
¿The site
¿Optionally the category
¿The number of result entries
¿The projected value to be returned (Content Bean ID)
¿The ordering of result entries

Determine the parameter values


Choose the base table name: If you want to report on Top Viewed Pages, the base table name will be `PAGEVIEWS¿. The Analytics Database documentation explains what data is held in what base table.


Select the time interval. The data in the Analytics Database is pre-consolidated, hence no data consolidation should be done in your Java code. Note that this limits the intervals you can choose from. The following options are available and imply the following parameter values: